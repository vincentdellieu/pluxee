<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page de Test - Compteur Pluxee (Bannière V4)</title>

    <style>
        :root {
            --plx-green: #00EB5E;
            --plx-dark-blue: #231C46;
            --plx-light-grey: #f0f2f5;
            --plx-white: #FFFFFF;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f9f9f9;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            color: #333;
        }
        
        /* Conteneur pour le test (simule la largeur de votre site) */
        .test-container {
            padding: 20px;
            max-width: 1200px; /* Largeur max de votre site */
            margin: 0 auto;
            text-align: center;
        }

        /* * STYLE DE LA BANNIÈRE FOMO
         */
        
        /* --- MOBILE (par défaut) --- */
        /* Design "Mobile-First" basé sur 320x100px */
        .plx-fomo-banner {
            width: 100%;
            max-width: 450px; 
            min-height: 100px; /* Hauteur minimale demandée */
            
            background-color: var(--plx-white);
            border: 1px solid var(--plx-light-grey);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            
            margin: 20px auto; 
            box-sizing: border-box;
            overflow: hidden;
            color: var(--plx-dark-blue);
            border-radius: 12px; /* Coins arrondis pour le widget mobile */
        }

        /* En-tête du titre (bandeau sombre) */
        .plx-banner-header {
            background-color: var(--plx-dark-blue);
            color: var(--plx-white);
            padding: 8px 10px; /* Moins de padding sur mobile */
            text-align: center;
            font-weight: bold;
            font-size: 14px; /* Plus petit sur mobile */
            border-radius: 12px 12px 0 0; /* Coins arrondis seulement en haut */
        }

        /* Corps de la bannière (contenu principal) */
        .plx-banner-body {
            display: flex;
            flex-direction: column; /* Pile verticalement sur mobile */
            justify-content: center;
            align-items: center;
            padding: 10px; /* Moins de padding sur mobile */
        }

        /* Texte principal (Rejoignez les X...) */
        #plx-main-counter {
            font-size: 14px; /* Plus petit sur mobile */
            margin: 0 0 6px 0;
            line-height: 1.2;
        }

        /* Conteneur de la barre de progression */
        .plx-progress-bar-wrapper {
            display: flex;
            align-items: center;
            width: 100%;
            margin-bottom: 6px;
        }

        .plx-progress-label-start,
        .plx-progress-label-end {
            font-size: 12px; /* Plus petit sur mobile */
            font-weight: bold;
            color: var(--plx-dark-blue);
        }

        .plx-progress-bar-container {
            flex-grow: 1;
            height: 10px; /* Hauteur de la barre plus petite sur mobile */
            background-color: var(--plx-light-grey);
            border-radius: 10px;
            margin: 0 8px; /* Marge réduite sur mobile */
            overflow: hidden;
        }

        #plx-progress-bar-inner {
            height: 100%;
            width: 20%; 
            background-color: var(--plx-green);
            border-radius: 10px;
            transition: width 0.8s ease-out;
        }
        
        /* Texte des places restantes */
        #plx-remaining-text {
            font-size: 14px; /* Plus petit sur mobile */
            font-weight: bold;
            margin: 0;
        }

        /* Styles des chiffres (en vert) */
        #plx-count-total,
        #plx-count-remaining {
            color: var(--plx-green);
            font-size: 1.1em; /* Légèrement plus petit sur mobile */
        }


        /* --- DESKTOP (à partir de 992px) --- */
        /* Design "Desktop" basé sur 1200x150px */
        
        @media (min-width: 992px) {
            .plx-fomo-banner {
                max-width: none; 
                min-height: 150px;
                margin: 20px 0; 
                border-radius: 0; /* Pas de coins arrondis en mode bandeau */
            }

            .plx-banner-header {
                font-size: 20px; /* Taille normale sur desktop */
                padding: 15px 20px;
                border-radius: 0; /* Pas de coins arrondis pour le header non plus */
            }

            .plx-banner-body {
                flex-direction: row; /* Horizontal sur desktop */
                justify-content: space-between;
                align-items: center;
                padding: 20px 40px; /* Plus de padding sur desktop */
            }

            /* Colonnes flexibles pour aligner les éléments */
            .plx-banner-col-text {
                flex-basis: 40%;
                text-align: left;
            }
            .plx-banner-col-progress {
                flex-basis: 35%;
            }
            .plx-banner-col-remaining {
                flex-basis: 25%;
                text-align: right;
            }
            
            #plx-main-counter {
                font-size: 18px; /* Taille normale sur desktop */
                margin: 0; /* Pas de marge basse */
            }

            .plx-progress-bar-container {
                height: 20px; /* Hauteur de la barre plus grande sur desktop */
            }
            .plx-progress-label-start,
            .plx-progress-label-end {
                font-size: 14px; /* Taille normale sur desktop */
            }

            #plx-remaining-text {
                font-size: 20px; /* Taille normale sur desktop */
            }

            #plx-count-total,
            #plx-count-remaining {
                font-size: 1.2em; /* Taille normale sur desktop */
            }
        }

    </style>
</head>
<body>

    <div class="test-container">
       
        <div class="plx-fomo-banner">
          
            <div class="plx-banner-header">
                Offre exclusive limitée aux premiers 500 inscrits
            </div>

            <div class="plx-banner-body">
                <div class="plx-banner-col plx-banner-col-text">
                    <p id="plx-main-counter">Rejoignez les <strong id="plx-count-total">100</strong> entreprises déjà inscrites</p>
                </div>
                
                <div class="plx-banner-col plx-banner-col-progress">
                    <div class="plx-progress-bar-wrapper">
                        <span class="plx-progress-label-start">0</span>
                        <div class="plx-progress-bar-container">
                            <div id="plx-progress-bar-inner"></div>
                        </div>
                        <span class="plx-progress-label-end">500</span>
                    </div>
                </div>
                
                <div class="plx-banner-col plx-banner-col-remaining">
                    <p id="plx-remaining-text">Plus que <strong id="plx-count-remaining">400</strong> places disponibles</p>
                </div>
            </div>
            
        </div>

        <p>(Contenu de la page qui continuerait ici...)</p>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', function() {

        // --- CONFIGURATION MODIFIÉE POUR LE TEST ---
        const joursDansLePasse = 20; 
        const dateDeLancement = new Date(new Date().getTime() - joursDansLePasse * 24 * 60 * 60 * 1000);
        
        // --- Paramètres de la campagne ---
        const dureeEnJours = 90;
        const inscriptionsInitiales = 121;
        const inscriptionsTotalesCibles = 500;
        
        // Calcul des variables
        const inscriptionsASimuler = inscriptionsTotalesCibles - inscriptionsInitiales; // 400
        const dateDeFin = new Date(dateDeLancement.getTime() + dureeEnJours * 24 * 60 * 60 * 1000);
        const dureeTotaleMs = dateDeFin.getTime() - dateDeLancement.getTime();
        
        // Sélection des éléments HTML
        const elTotal = document.getElementById('plx-count-total');
        const elRemaining = document.getElementById('plx-count-remaining');
        const elProgressBar = document.getElementById('plx-progress-bar-inner');

        if (!elTotal || !elRemaining || !elProgressBar) {
            console.warn('Éléments du compteur Pluxee non trouvés. Le script est arrêté.');
            return;
        }
        
        // On réinitialise la simulation à chaque chargement de la page de test pour mieux voir l'effet.
        localStorage.setItem('plxFakeSignups', '0');

        function mettreAJourCompteur() {
            const maintenant = new Date();
            
            if (maintenant < dateDeLancement) {
                afficherValeurs(inscriptionsInitiales);
                return;
            }

            const tempsEcouleMs = maintenant.getTime() - dateDeLancement.getTime();
            let pourcentageEcoule = tempsEcouleMs / dureeTotaleMs;

            if (pourcentageEcoule > 1) {
                pourcentageEcoule = 1;
            }

            // 1. Calcul des inscriptions "de base" basées sur le temps
            const inscriptionsDeBase = Math.floor(inscriptionsASimuler * pourcentageEcoule);

            // 2. Ajout de la simulation "live"
            let inscriptionsSimuleesLive = parseInt(localStorage.getItem('plxFakeSignups') || '0');
            
            let totalInscriptionsActuelles = inscriptionsInitiales + inscriptionsDeBase + inscriptionsSimuleesLive;

            if (totalInscriptionsActuelles > inscriptionsTotalesCibles) {
                totalInscriptionsActuelles = inscriptionsTotalesCibles;
            }

            afficherValeurs(totalInscriptionsActuelles);
        }

        function afficherValeurs(total) {
            const restantes = Math.max(0, inscriptionsTotalesCibles - total);
            const pourcentageComplet = (total / inscriptionsTotalesCibles) * 100;

            elTotal.textContent = total;
